
shinyUI(bootstrapPage(
  useShinyjs(),
  tags$style("@import url(https://use.fontawesome.com/releases/v5.7.2/css/all.css);"),
  navbarPage(
             # theme = shinytheme("flatly"),
              theme = shinytheme("cerulean"),  # to change theme
             # theme = shinytheme("darkly"),
             collapsible = TRUE,
             inverse = FALSE,
             title = "SORMAS Stats", 
             id="nav",
             tabPanel( "Transmission Network", 
                       icon = icon("project-diagram"), # icon("filter"),
                       sidebarLayout(
                         #div( id ="Sidebar",
                         sidebarPanel(
                           # Filter specific to network diagram only
                           span(tags$i(h5("Please select filter options and click on the `Apply changes` icon below. Click on `Visualize network diagram` to plot the network diagram.")), style="color:#045a8d"),
                           pickerInput("diseaseUi", "Disease", 
                                       choices = c("CORONAVIRUS", "LASSA","MONKEYPOX", "LASSA", "CSM","EVD","NEW_INFLUENZA", "PLAGUE",
                                                   "UNDEFINED","UNSPECIFIED_VHF","MEASLES","OTHER"), 
                                       selected = c("CORONAVIRUS"),
                                       multiple = FALSE),
                           #br(),
                           dateRangeInput("reportdateUi","Report date (dd-mm-yyyy)" , start = Sys.Date() - delay_default_UI, end = Sys.Date(), min = NULL,
                                          max = NULL, format = "dd-mm-yyyy", startview = "month",
                                          weekstart = 0, language = "en", separator = " to ", width = NULL,
                                          autoclose = TRUE),  # replace start = Sys.Date()-30 in case you need to show default statistics for last 30 days only

                          # filter by Region
                          pickerInput(
                            inputId = "regionNetworkUi",
                            label = 'Region of infection',
                            choices = sort(levels(as.factor(elist$region_name))),
                            options = list(
                              `actions-box` = TRUE, 
                              size = 12
                            ),
                            selected = NULL,
                            multiple = TRUE
                          ),
                          # filter by district
                          uiOutput('pickerInputDistrict2'),
                          # filter by entity type
                          pickerInput(
                            inputId = "contactEntitiyTypeUi", 
                            label = 'Source infector entity type',
                            choices = sort(unique(elist$entityType)), 
                            options = list(
                              `actions-box` = TRUE, 
                              size = 12
                            ),
                            selected = NULL,
                            multiple = TRUE
                          ),
                          
                          # filter by relationship with infector
                          pickerInput(
                            inputId = "relationCaseUi", 
                            label = 'Contact settings',
                            choices = sort(levels(as.factor(elist$relationtocase))), 
                            options = list(
                              `actions-box` = TRUE, 
                              size = 12
                            ),
                            selected = NULL,
                            multiple = TRUE
                          ),
                          
                          # filter by event status
                          pickerInput(
                            inputId = "eventstatusUI", 
                            label = 'Event Status',
                            choices = sort(levels(as.factor(elist$eventstatus))), 
                            options = list(
                              `actions-box` = TRUE, 
                              size = 12
                            ),
                            selected = NULL,
                            multiple = TRUE
                          ),
                          
                          # filter by event risk level
                          pickerInput(
                            inputId = "risklevelUI", 
                            label = 'Event risk level',
                            choices = sort(levels(as.factor(elist$risklevel_event))), 
                            options = list(
                              `actions-box` = TRUE, 
                              size = 12
                            ),
                            selected = NULL,
                            multiple = TRUE
                          ),
                          checkboxInput("resultingCaseOnlyUi", "Only chains with resulting cases ?", TRUE),
                          checkboxInput("excludeHealthyEventPartUi", "Exclude healthy event participant ?", FALSE),
                          checkboxInput("activeEventsOnlyUi", "Only chains with active events ?", FALSE),
                          checkboxInput("IgraphLayoutUi", "Fast and fixed visualization ?", TRUE),
                          checkboxInput("visNetworkDiagramUi", "Visualize network diagram ?", TRUE),
                         selectizeInput(
                           inputId = "visSelectedChainsUi"
                           , label = h5("Source infector node IDs (comma delimited)")
                           , choices = NULL
                           , multiple = TRUE
                           , options = list(create = TRUE)
                         ),
                         numericInput("nodeDegreeMinUi", h5("Minimum source infector node contact"), value = 1, min = 1),
                        textInput("visSingleNodeUi", label = h5("Only contacts of this ID"),
                                  value = "", placeholder = "Enter uuid of node ..." ),
                        
                        # adding action button to apply filters
                       actionButton(inputId = "transChainAction", label = "Apply changes", icon =  icon("running"),
                                     class = "btn-primary", width = '65%'), #  class = "btn-primary" for normal size icon, ref: https://www.jquery-az.com/boots/demo.php?ex=12.0_1
                       #span(tags$i(h6("Click this button to update the output displayed on this dashboard each time you modify the filters.")), style="color:#045a8d"),
                       
                        # add logout button to UI
                         shinyauthr::logoutUI(id = "logout"),
                          #br(),
                          #hr(),
                          #h6("Powered by:"),
                          # tags$img(src = "HZI_Logo.jpg", height = 50, width = 200) #addtiing HZI logo to sidebar panel
                          width = 2),
                         #), #end of div to activate option to dis sidebar panel 
                         
                         mainPanel(
                           width = 10,
                           # add login panel UI function
                           shinyauthr::loginUI(id = "login", title = "Please authenticate to begin analysis. Default credential is
                                               username: ars password: sormas-stats"),
                           # add logout button to UI
                           # div(class = "pull-right", shinyauthr::logoutUI(id = "logout")), # can also be "pull-left" or "pull-middle"
                           
                           #actionButton("toggleSidebar", "Toggle sidebar"), # removed from app
                          fluidRow(
                                  visNetworkOutput("transChain", width = "100%", height = "100vh"), width=12 )
                           ,
                           hr(style = "border-color: #cbcbcb;"),
                           
                           fluidRow(
                             column(width = 6, align = "left",
                                    box(
                                      h4(helpText("Source infector node ID. Use this ID to extract a single chain",  )),
                                      #footer = "Node degree",
                                      status ="primary", #  "success", # or "warning", 
                                      solidHeader = FALSE,
                                      collapsible = TRUE,
                                      collapsed = FALSE,
                                      width = 15,
                                      #height = 112, # 118, # 142,
                                      verbatimTextOutput("sourceNodeUUID")
                                    )
                             )
                             ,
                             column(width = 6, align = "left",
                                    p('* Zoom in the network diagram to see the contact categories and IDs for person and event nodes.', style = "font-size: 95%"),
                                    p('* High risk => Type of contact is Face_to_face_long, Medical_unsave, Touched_fluid, Touched_cloth, Physical_contact, otherwise, Low risk', style = "font-size: 95%"),
                                    p('* Right click on the network diagram or legend to download or copy.', style = "font-size: 95%"),
                                    p("* The filters on the left panel are based on complete data, thus entities with missing values (NULL or UNKNOWN) for the variable used for filtering are dropped.", style = "font-size: 95%"),
                                    p('* All of the data used to generate indicators and figures in this app were obtained from', tags$a(href = "https://demo.sormas.org/sormas-ui/", 'SORMAS', target = '_blank'), '.', style = "font-size: 95%")
                                   )
                           )
                         ) # end of main panel
                       
                       )
                       ,
                       # network parameters
                       wellPanel(style = "background: white", 
                                 h4(helpText("Network summary indicators")),
                                 fluidRow(
                                   column(2, infoBoxOutput("totalEdges", width = 12)),
                                   column(2, infoBoxOutput("totalNodes", width = 12)),
                                   column(2, infoBoxOutput("totalEventNodes", width = 12)),
                                   column(2, infoBoxOutput("totalReultingcasesEdges", width = 12)),
                                   column(2, infoBoxOutput("transChainSumUI", width = 12)),
                                   column(2, infoBoxOutput("diameterDirected", width = 12))
                                 ),
                                 fluidRow(
                                   column(2, infoBoxOutput("totalPersonNodes", width = 12)),
                                   column(2, infoBoxOutput("totalContactEpPersonNodes", width = 12)),
                                   column(2, infoBoxOutput("totalInfectorInfecteePair", width = 12)),
                                   column(2, infoBoxOutput("totalReultingcasesNodes", width = 12)),
                                   column(2, infoBoxOutput("propContactEpPersonConverted", width = 12)),
                                   column(2, infoBoxOutput("diameterUndirected", width = 12))
                                 ),
                                 
                                 fluidRow(
                                   column(2, infoBoxOutput("totInfectorCaseEventNodes", width = 12)),
                                   column(2, infoBoxOutput("totSourceInfectorCaseEventNodes", width = 12)),
                                   column(2, infoBoxOutput("propInfectorCaseEventNodes", width = 12)),
                                   column(2, infoBoxOutput("nodeVMR", width = 12)),
                                   column(2, infoBoxOutput("edgeDensity", width = 12)),
                                   column(2, infoBoxOutput("transitivityScore", width = 12))

                                 )
                       ),
                      
                       fluidRow( width = 12,
                                 column(2,
                                        wellPanel(
                                          h4(helpText("Total node counts by classification")),
                                          div( DT::dataTableOutput("nodeClassificationCountTable", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%")
                                        )
                                 ),
                                 column(5,
                                        wellPanel(
                                          h4(helpText("Histogram of betweeness score")),
                                          #div( DT::dataTableOutput("networkParameter2Table")  , style = "font-size: 100%; width: 100%" )
                                          fluidRow(
                                            width = 12,
                                            plotOutput("nodeBetweenessHist", width = "100%", height = "40vh")
                                          )
                                          ,
                                          fluidRow(
                                            width = 12,
                                            box(
                                              h4(helpText("Summary of node betweeness")),
                                              #footer = "Node degree",
                                              status ="primary", #  "success", # or "warning", 
                                              solidHeader = FALSE,
                                              collapsible = TRUE,
                                              collapsed = FALSE,
                                              width = 15,
                                              #height = 142, # 118, # 142,
                                              verbatimTextOutput("nodeBetweenessSummary")
                                            )
                                          )
                                        )
                                 )
                                 ,
                                 column(5,
                                        wellPanel(
                                          h4(helpText("Histogram of number of contacts per node (Node degree)")),
                                          fluidRow(
                                            width = 12,
                                            plotOutput("nodeDegreeHist", width = "100%", height = "40vh")
                                          ),
                                          fluidRow(
                                            width = 12,
                                            box(
                                              h4(helpText("Summary of number of ontacts per node (Node degree)")),
                                              #footer = "Node degree",
                                              status ="primary", #  "success", # or "warning", 
                                              solidHeader = FALSE,
                                              collapsible = TRUE,
                                              collapsed = FALSE,
                                              width = 15,
                                             #height = 142, # 118, # 142,
                                              verbatimTextOutput("nodeDegreeSummary")
                                            )
                                          )
                                        )
                                 )
                                 
                       ) 
                       
             ),
## end of network diagram analysis      
         
##### Case data analysis ######## 
             tabPanel( "Case data analysis", icon = icon("procedures"),
                       sidebarLayout(
                         sidebarPanel( 
                           span(tags$i(h5("Please select filter options and click on `Apply changes` to run analyses.")), style="color:#045a8d"),
                           actionButton(inputId = "caseDataAnalysisAction", label = "Apply changes", icon =  icon("running"),
                                        class = "btn-primary", width = '55%'),
                           hr(),
                           conditionalPanel(condition = "input.tabs1==0",
                                            radioButtons("caseDashboardIndicatorTypeUi","Indicator type",  
                                                         choices = c("Count","Proportion"),
                                                         selected = c("Count")) 
                           ),
                           conditionalPanel(condition = "input.tabs1==1",
                                            radioButtons("timeUnitEpicurveUi","Choose an option",  choices = c("Day","Epi-week", "Month"),selected = c("Epi-week"))
                                            ),
                           conditionalPanel(condition = "input.tabs1==2",
                                            radioButtons("timeUnitUi","Choose",  choices = c("Day","Epi-week", "Month"),selected = c("Epi-week")),
                                            checkboxInput(inputId = "cumUi", label = "Cummulative cases", value =F),
                                            checkboxInput(inputId = "byRegiontimeUnitUi", label = "Cases by region", value =F),
                                            checkboxInput(inputId = "cumRegionUi", label = "Cummulative cases by region", value =F)
                                            ),
                           conditionalPanel(condition = "input.tabs1==3", h4(" "),
                                            radioButtons("sexCategoryUi","Choose sex category",  choices = c("Male X Female","Male X Others", "Female X Others"),selected = c("Male X Female"))
                                            ),
                           conditionalPanel(condition = "input.tabs1==4",
                                            radioButtons("caseMapshapesUi","Map shapes",  choices = c("By region","By district"),selected = c("By region")),
                                            #radioButtons("caseleafletMapUi","Map type",  choices = c("Shapfiles","Leaflet"),selected = c("Shapfiles")),
                                            radioButtons("caseIndicatorTypeMapUi","Indicator type",  choices = c("Count","Proportion", "Incidence proportion / 100,000"),selected = c("Count")),
                                            # filter map by Region of case
                                            # Only shapes of the selected regions would be plotted
                                            pickerInput(
                                              inputId = "regionCaseMapUi",
                                              label = 'Choose region to plot shapes',
                                              choices = sort(levels(as.factor(casePersonRegionDist$region_name))),
                                              options = list(
                                                `actions-box` = TRUE,
                                                size = 12
                                              ),
                                              selected = NULL,
                                              multiple = TRUE
                                            )
                                            ),
                           conditionalPanel(condition = "input.tabs1==5",
                                            # serial interval distribution to use in estimating Rt
                                            pickerInput(
                                              inputId = "si_rt_UI",
                                              label = h5('Choose distribution for SI'),
                                              choices = c( "Gamma", "Lognormal", "Weibull" ), # dist = "G" (Gamma), "W" (Weibull), "L" (Lognormal) 
                                              options = list(
                                                `actions-box` = TRUE,
                                                title = "Select distribution for SI",
                                                header = "only select if SI estimation method is parametric",
                                                maxOptions = 1,
                                                size = 12
                                              ),
                                              selected = "Gamma",
                                              multiple = FALSE
                                            ),
                                           radioButtons("rtMethodUi", h5("SI estimation method"),  choices = c("Parametric distribution","Transmission data"),
                                                        selected = c("Parametric distribution")),
                                           # Only show mean and sd when method == parametric
                                           # ref: https://mran.microsoft.com/snapshot/2015-06-24/web/packages/shinyjs/README.html
                                           shinyjs::hidden(
                                             div(id = "showMeanSdSIUI",
                                                 numericInput("mean_siUI", label = h5("Specify SI mean"), value = 5.2, min = 1), # Mean SI must be > 1 for parametric distribution
                                                 numericInput("std_siUI", label = h5("Specify SI Std Dev"), value = 2.3, min =0.01 )
                                             )
                                           ), 
                                           
                                            sliderInput("siUi", label = h5("Choose maximum value for SI"), min = 1, 
                                                        max = 30, step = 1, value = 14),
                                            radioButtons("rsiUi", h5("Ploting parameters"),  choices = c("all","R","SI"), selected = c("R"), inline = TRUE),
                                            checkboxInput("rtLegandUi", label= h5("Show legend of estimated Rt plot?"), value = FALSE),
                                           span(tags$i(h5("This section estimates the time dependent reproduction number Rt, t = week. 
                                            The data used are the case-based incidence data and transmission network data.")), style="color:#045a8d"),
                                           span(tags$i(h5("We begin by estimating the serial interval (SI) distribution and use it to estimate Rt. 
                                                           The SI distribution can be estimated parametrically by specifying the mean and std for SI OR by using the tramission network data.")), 
                                                style="color:#045a8d"),
                                           
                                           span(tags$i(h5("For `SI estimation method` using transmission data, the analysis is based on 1500 MCMC iterations and may take some time, depenting on your data size.")), 
                                                style="color:#045a8d")
                                           
                                            ),
                           conditionalPanel(condition = "input.tabs1==6",
                                            radioButtons("caseByRegionIndicatorTypeUi","Indicator type",  
                                                         choices = c("Count","Proportion", "Incidence Proportion / 100,000"),
                                                         selected = c("Count")) 
                                            ),
                           conditionalPanel(condition = "input.tabs1==7",
                                            sliderInput("serialIntervalRangeUi", label = h5("Choose the serial interval range"), min = -30, 
                                                        max = 50, step = 1, value = c(1, 30)),
                                            pickerInput(
                                              inputId = "siDistMethodUi", 
                                              label = h5('Choose distribution with best fit'),
                                              choices = c("Lognormal","Normal", "Weibull", "Gamma"),
                                              selected = "Lognormal",
                                              multiple = FALSE,
                                              options = pickerOptions(
                                                actionsBox = TRUE,
                                                header = "Distributiohn with best fit has smallest AIC or BIC",
                                                #title = "Only one distribution can be selected",
                                                maxOptions = 2
                                              )
                                            ),
                                            numericInput("niter_SI_UI", label = h5("Specify number of bootstrap iteration"), value = 100),
                                            checkboxInput("showModelDiagnosticsPanel_SI",  "Show model disgnostics plots", FALSE),
                                            br(),
                                            span(tags$i(h5(" This section estimates the serial interval (SI). The data used here is the case-based data of infector-infertee 
                                                           pairs extracted from thet transmission network data."
                                                           )), style="color:#045a8d"),
                                            span(tags$i(h5("Different distributions are fitted to the observed SI. After choosing the distribution with best fit based on smallest AIC, 
                                                           the app then estimate the mean SI and 95% CI using bootstrap." 
                                                           )), style="color:#045a8d")
                           ), 
                           conditionalPanel(condition = "input.tabs1==8",
                                            numericInput("polyDegree_RtK_UI", label = h5("Specify degree of the polynomial curve"),  min = 1, max=9, value = NA),
                                            br(),
                                            span(tags$i(h5("This section estimates the superspreading parameter (k) and effective reproduction number (R). 
                                                           The data used here is the case-based infector-infertee pairs extracted from thet transmission network data."
                                            )), style="color:#045a8d"),
                                            span(tags$i(h5("A negative binomial distribution (NB) is fitted to the offspring distribution (number of infector per infectee). 
                                                           The mean of the NB estimates the effective reproductive number (R) while the dispersion parameter estimate the 
                                                           superspreading parameter (k). The 95% confidence interval is estimated using `confint`   function of the R `stats` package.
                                                           ")), style="color:#045a8d")
                           ),
                           width = 2),
                         
                         mainPanel(
                           fluidRow(
                             column(2, 
                                   pickerInput("diseaseCaseUi", "Disease",
                                               choices = sort(levels(as.factor(casePersonRegionDist$disease))),
                                                selected = c("CORONAVIRUS"),
                                                multiple = FALSE)
                                    ),
                             column(2,
                                    dateRangeInput("reportdateCaseUi","Report date (dd-mm-yyyy)" , start = Sys.Date() - delay_default_UI, end = Sys.Date(), min = NULL,
                                                   max = NULL, format = "dd-mm-yyyy", startview = "month",
                                                   weekstart = 0, language = "en", separator = " to ", width = NULL,
                                                   autoclose = TRUE)
                             ),
                             column(2, 
                                    pickerInput(
                                      inputId = "regionCaseUi",
                                      label = 'Region of case',
                                      choices = sort(levels(as.factor(casePersonRegionDist$region_name))),
                                      options = list(
                                        `actions-box` = TRUE,
                                        size = 12
                                      ),
                                      selected = NULL,
                                      multiple = TRUE
                                    )
                             ),
                             column(2, 
                                    uiOutput('pickerInputdistrictCaseUi') # ui element for district
                             ),
                             column(2, pickerInput(
                               inputId = "classificationCaseUi",
                               label = 'Classification of case',
                               choices = sort(levels(as.factor(casePersonRegionDist$caseclassification))),
                               options = list(
                                 `actions-box` = TRUE,
                                 size = 12
                               ),
                               selected = NULL,
                               multiple = TRUE
                             )),
                             column(2, pickerInput(
                               inputId = "facilityCaseUi",
                               label = 'Facility id of case',
                               choices = sort(levels(as.factor(casePersonRegionDist$healthfacility_id))),
                               options = list(
                                 `actions-box` = TRUE,
                                 size = 12
                               ),
                               selected = NULL,
                               multiple = TRUE
                             ))
                           )
                           ,
                           #  br(),
                           tabsetPanel( id="tabs1",
                                       tabPanel("Case dashboard", value = 0,
                                                wellPanel(style = "background: white",
                                                          h4('Case classification'),
                                                          fluidRow(width = 12,
                                                                   infoBoxOutput("allCase", width = 2),
                                                                   infoBoxOutput("UnclassifiedCases",width = 2),
                                                                   infoBoxOutput("suspectedCases", width = 2),
                                                                   infoBoxOutput("probableCases",width = 2),
                                                                   infoBoxOutput("confirmedCases", width = 2)
                                                          ),
                                                          h4('Case quarantine'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("institutionalQCases",width = 2),
                                                                   infoBoxOutput("homeQCases", width = 2),
                                                                   infoBoxOutput("otherQCases", width = 2),
                                                                   infoBoxOutput("noneQCases", width = 2),
                                                                   infoBoxOutput("unknownQCases", width = 2),
                                                                   infoBoxOutput("MissingQCases", width = 2)
                                                          ),
                                                          h4('Case gender'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("maleSexCases",width = 2),
                                                                   infoBoxOutput("femaleSexCases", width = 2),
                                                                   infoBoxOutput("otherSexCases", width = 2),
                                                                   infoBoxOutput("unknownSexCases", width = 2),
                                                                   infoBoxOutput("MissingSexCases", width = 2)
                                                          ),
                                                          h4('Case age'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("minAgeCases",width = 2),
                                                                   infoBoxOutput("medianAgeCases", width = 2),
                                                                   infoBoxOutput("meanAgeCases", width = 2),
                                                                   infoBoxOutput("maxAgeCases", width = 2),
                                                                   infoBoxOutput("missingAgeCases", width = 2)
                                                          ),
                                                          h4('Case outcome'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("diseasedCases",width = 2),
                                                                   infoBoxOutput("recoveredCases", width = 2),
                                                                   infoBoxOutput("unknownOutcomeCases", width = 2),
                                                                   infoBoxOutput("noOutcomeCases",width = 2)
                                                          ),
                                                          h4('Case occupation'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("healthWorkerOcupCases",width = 2),
                                                                   infoBoxOutput("otherOcupCases", width = 2),
                                                                   infoBoxOutput("MissingOcupCases", width = 2)
                                                          ),
                                                          h4('Case Origin'),
                                                          fluidRow(width=12,
                                                                   infoBoxOutput("incountryCases",width = 2),
                                                                   infoBoxOutput("importedCases", width = 2)
                                                          )
                                                ),
                                              tags$br(),tags$br(),
                                                " Add some description text here")
                                       ,
                                       tabPanel("Cases by region", value = 6,
                                                fluidRow(
                                                  column(12, DT::dataTableOutput("caseCountbyRegionTable"))    
                                                ),
                                                # tags$br(),
                                                h4(strong("Meaning of column headers")),
                                                #tags$br(),
                                                h5(strong("Name:"), "Name of administrative unit,", strong("Total:"), "Total number of cases reported within the time interval specified in the filter,", strong("Total_last24hrs:"), "Total number of cases reported in the last 24 hrs,", 
                                                strong("Confirmed:"),  "Total number of confirmed cases,", strong("Probable:"), "Total number of probable cases,",  strong("Unclassified:"), "Total number of unclassified cases,",
                                                strong("Suspected:"), "Total number of suspected cases,", strong("Deseases:"), "Total number of death cases,", strong("No_Outcome:"), "Total number of cases without an outcome yet,",
                                                strong("Recovered:"), "Total number of recovered cases,", strong("Unk_Outcome:"), "Total number of cases with unknown outcome,", strong("In_Country:"), "Total number of cases resulting from local transmission,",
                                                strong("Imported:"), "Total number of imported cases,", strong("Home_Q:"), "Total number of cases quarantine at home,", strong("Institutional_Q:"), "Total number of cases quarantine in an institurion,",
                                                strong("No_Q:"), "Total number of cases that are not on quarantine,", strong("Other_Q:"), "Total number of cases quarantine at other places,", strong("Unk_Q:"), "Total number of cases with unknown quarantine"
                                                )
                                                )
                                       ,
                                       tabPanel("Epidemic curve", value = 1, plotlyOutput("caseEpicurvePlot", width = "100%", height = "80vh"))
                                       ,
                                       tabPanel("Time series plot", value = 2, plotlyOutput("caseTimeSeriesPlot", width = "100%", height = "80vh"))
                                       ,
                                       tabPanel("Case Pyramid",  value = 3,
                                                wellPanel(
                                                  h4(helpText("Case pyramid by Sex and Age")) , 
                                                  #plotOutput("casePyramidPlot", width = "100%", height = "auto")
                                                  plotlyOutput("casePyramidPlot", width = "80%", height = "75vh"),
                                                  style = "background: white"
                                                ) 
                                                )
                                       ,
                                       tabPanel("Administrative map", value = 4, plotOutput("regionMapCaseCount", width = "100%", height = "80vh"))
                                       ,
                                       tabPanel("Serial interval analysis", value = 7,
                                                fluidRow( width = 10,
                                                          column(12,
                                                                 wellPanel(
                                                                   h4(helpText("Medel selection: Goodness-of-fit criteria and statistics.  
                                                                                     Model with smallest values correspond to distribtion with best fit." )),
                                                                   div( DT::dataTableOutput("si_model_fitTable", width = "100%", height = "auto"), 
                                                                        style = "font-size: 100%; width: 100%")
                                                                 )
                                                          )
                                                ), ## end of flud row
                                                fluidRow( width = 10,                                                         
                                                          column(6,
                                                                 conditionalPanel(condition = 'input.showModelDiagnosticsPanel_SI',
                                                                 wellPanel(
                                                                   h4(helpText("Empirical and theoretical CDFs")),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     plotOutput("SI_model_cdf_plot", width = "100%", height = "60vh")
                                                                   )
                                                                 )
                                                          )
                                                                 
                                                          ),
                                                          column(6,
                                                                 conditionalPanel(condition = 'input.showModelDiagnosticsPanel_SI',
                                                                 wellPanel(
                                                                   h4(helpText("Q-Q plot")),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     plotOutput("SI_model_qq_plot", width = "100%", height = "60vh")
                                                                   )
                                                                 )
                                                          )
                                                          )
                                                ), ## end of flud row
                                                
                                                fluidRow( width = 10,
                                                          column(6,
                                                                 wellPanel(
                                                                   h4(helpText("Empirical and theoretical density")),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     plotOutput("SI_hist_model_plot", width = "100%", height = "60vh")
                                                                     # plotOutput(" ", width = "100%", height = "40vh")
                                                                   )
                                                                 )
                                                          ),
                                                          column(6,
                                                                 wellPanel(
                                                                   fluidRow(
                                                                     width = 12,
                                                                     box(
                                                                       h4(helpText("Summary statistics for observed serial interval")),
                                                                       #footer = "Node degree",
                                                                       status ="primary", #  "success", # or "warning",
                                                                       solidHeader = FALSE,
                                                                       collapsible = TRUE,
                                                                       collapsed = FALSE,
                                                                       width = 15,
                                                                       # height = 148, # 118, # 142,
                                                                       # verbatimTextOutput("si_summaryTable"),
                                                                       div(DT::dataTableOutput("si_summaryTable", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%"),
                                                                       h5(helpText("n_value <= 0: number of records with negative or zero serial interval. This corresponds to assymptomatic transmissiion."))
                                                                     )
                                                                   ),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     box(
                                                                       h4(helpText("Parameter estimate and 95% CI of distribtion with best fit to the data")),
                                                                       #footer = "Node degree",
                                                                       status ="primary", #  "success", # or "warning", 
                                                                       solidHeader = FALSE,
                                                                       collapsible = TRUE,
                                                                       collapsed = FALSE,
                                                                       width = 15,
                                                                       # height = 148, # 118, # 142,
                                                                       div( DT::dataTableOutput("SI_estimate_table", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%"),
                                                                       h5(helpText("These estimates were estimated using boostrap based on the specified number of iteration specified in the filter.
                                                                                   For efficient estimates, set the specified number of iterations to be > 1000. This may takes some time for bootsrap
                                                                                  to complete."))
                                                                     )
                                                                   ),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     box(
                                                                       h4(helpText("Estimate of mean serial interval")),
                                                                       #footer = "Node degree",
                                                                       status ="primary", #  "success", # or "warning",
                                                                       solidHeader = FALSE,
                                                                       collapsible = TRUE,
                                                                       collapsed = FALSE,
                                                                       width = 15,
                                                                       # height = 148, # 118, # 142,
                                                                       # verbatimTextOutput("si_summaryTable"),
                                                                       div( DT::dataTableOutput("si_mean_CI_table", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%")
                                                                     )
                                                                   )
                                                                   )
                                                          )
                                                ), ## end of flud row
                                                fluidRow( width = 10,
                                                          column(12,
                                                                 wellPanel(
                                                                   h4(helpText("Serial interval and fitted distribtion for model with best fit to the data")),
                                                                   fluidRow(
                                                                     width = 12,
                                                                     plotOutput("distribution_SI_plot", width = "100%", height = "60vh")
                                                                   )
                                                                 )
                                                          )
                                                ) ## end of flud row
                                     ),
                                     tabPanel("Dispersion analysis", value = 8,  
                                              fluidRow( width = 10,                                                        
                                                        column(6,
                                                               wellPanel(
                                                                 h4(helpText("Distributions of number of infectee per infector (offsping distribution)")),
                                                                 fluidRow(
                                                                   width = 12,
                                                                   plotOutput("distribution_k_plot", width = "100%", height = "60vh")
                                                                 )
                                                               )
                                                               ),
                                                        column(6,
                                                               wellPanel(
                                                                 fluidRow(
                                                                   width = 12,
                                                                   box(
                                                                     h4(helpText("Summary statistics for observed offsring distribution")),
                                                                     #footer = "Node degree",
                                                                     status ="primary", #  "success", # or "warning", 
                                                                     solidHeader = FALSE,
                                                                     collapsible = TRUE,
                                                                     collapsed = FALSE,
                                                                     width = 15,
                                                                     div( DT::dataTableOutput("nodedegree_summaryTable", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%"),
                                                                     h5(helpText("n_value <= 0: number of terminal infectee nodes. This corresponds to cases that were infected but did not infect further cases."))
                                                                   )
                                                                 ),
                                                                 fluidRow(
                                                                   width = 12,
                                                                   box(
                                                                     h4(helpText("Estimates of reproduction number (R) and dispersion parameter (k) using NB distribution")),
                                                                     #footer = "Node degree",
                                                                     status ="primary", #  "success", # or "warning", 
                                                                     solidHeader = FALSE,
                                                                     collapsible = TRUE,
                                                                     collapsed = FALSE,
                                                                     width = 15,
                                                                     #height = 158, # 118, # 142,
                                                                     div( DT::dataTableOutput("k_estimate_table", width = "100%", height = "auto"), style = "font-size: 100%; width: 100%"),
                                                                     h5(helpText("SD: standard deviation, CI: confidence interval, a lower dispersion parameter k indicates  higher transmission heterogeneity
                                                                                 i.e. more transmissions resulted from a small number of people."))
                                                                     )
                                                                 )
                                                               )
                                                        )
                                              ) ## end of flud row
                                     ),
                                     tabPanel("Reproduction number (Rt)", value = 5, 
                                              wellPanel(
                                                h4(helpText("Estimate of time dependent reproduction number Rt")) ,
                                                fluidRow(
                                                  width = 12,
                                                plotOutput("rtPlot", width = "90%", height = "80vh"),
                                                style = "background: white"
                                                ),
                                                fluidRow(
                                                  width = 12,
                                                  box(
                                                    h4(helpText("Summary of estimated mean time dependent reproduction number")),
                                                    #footer = "Node degree",
                                                    status ="primary", #  "success", # or "warning", 
                                                    solidHeader = FALSE,
                                                    collapsible = TRUE,
                                                    collapsed = FALSE,
                                                    width = 12,
                                                    #height = 142, # 118, # 142,
                                                    #verbatimTextOutput("rtSummary")
                                                    div( DT::dataTableOutput("rtSummary_table", width = "50%", height = "auto"), style = "font-size: 100%; width: 100%"),
                                                  )
                                                )
                                              )
                                              )
                                     # , Deactivating basic line-list export of cases
                                     # tabPanel("Basic export", 
                                     #                   numericInput("maxrowsCase", "Rows to show", 20),
                                     #                   verbatimTextOutput("casebyRegionVarTable"),
                                     #                   downloadButton("caseRegionVarExpCsv", "Download as CSV"),tags$br(),tags$br(),
                                     #                   "Each row in this data a case. The data was obtained by merging case, person, region and district tables")
                           ),
                           width = 10)                       
                       )
             ),


#### Event data analysis ----
tabPanel( "Event data analysis", icon = icon("procedures"),
          sidebarLayout(position = "left",
            sidebarPanel(width = 2,
              span(tags$i(h5("Please select filter options and click on `Apply changes` to run analysis.")), style="color:#045a8d"),
              span(tags$i(h5("The relevant date filter uses  the date of event and if missing, impute with report date.")), style="color:#045a8d"),
              actionButton(inputId = "eventDataAnalysisAction", label = "Apply changes", icon =  icon("running"),
                           class = "btn-primary", width = '55%'),
              hr(),
            conditionalPanel(condition =  "input.tabEvent == 1",
                pickerInput(
                  inputId = "eventTableColumnVaribleUi", 
                  label = 'Choose table columns',
                  choices = c(levels(as.factor(event_variable_data$event_variable)) ) ,
                  selected = c("Name", "Total", "Event status"),
                  multiple = TRUE,
                  options = pickerOptions(
                    actionsBox = TRUE,
                    header = "Choose variables to use for table columns",
                  ))
              ),
              conditionalPanel(condition =  "input.tabEvent == 2",
                pickerInput(
                  inputId = "twoByTwotableEventVariblesUi", 
                  label = 'Choose variables to plot 2X2 table',
                  choices = c(levels(as.factor(colnames(eventData)))),
                  multiple = TRUE,
                  options = pickerOptions(
                                   actionsBox = TRUE,
                                   title = "Please select 2 varibles",
                                   header = "Only 2 variables can be selected",
                                   maxOptions = 2
                                 )
                    ),
                 checkboxInput("transpose2x1TableEventUi", "Transpose 2 X 2 table ?", TRUE),
                 pickerInput(
                      "piechartEventVaribleUi", 'Choose variable to plot Pie chart',
                       choices = c("Event Status",levels(as.factor(colnames(eventData)))) ,
                       selected = "Event Status",
                       multiple = FALSE
                            ),
                 pickerInput(
                      "barplotEventVaribleUi", 'Choose variable to plot bar graph',
                       choices = c("Location category",levels(as.factor(colnames(eventData)))) ,
                       selected = "Location category",
                       multiple = FALSE
                            )
              ),
              conditionalPanel(condition =  "input.tabEvent == 3",
               radioButtons("eventMapShapesUi","Choose map administrative area",  choices = c("Region","Departement", "Commune"),
                                           selected = c("Region")),
               sliderInput("eventMapTextSizeUi", label = "Choose text size for map", min = 0, 
                          max = 2, step = 0.2, value = 1.2)
              )               
            ), 
            
            mainPanel(width = 10,
                      fluidRow(
                        # filter by disease of event 
                        column(2, 
                               pickerInput("diseaseEventUi", "Disease", choices = sort(levels(as.factor(eventData$disease_event))), 
                                           selected = c("CORONAVIRUS"),multiple = FALSE)
                        ),
                        # filter by date of event 
                        column(2, 
                               dateRangeInput("reportdateEventUi","Relevant date (dd-mm-yyyy)" , start = Sys.Date() - delay_default_UI, end = Sys.Date(), min = NULL,
                                              max = NULL, format = "dd-mm-yyyy", startview = "month",
                                              weekstart = 0, language = "en", separator = " to ", width = NULL,
                                              autoclose = TRUE)
                        ),
                        # filter by Region of event
                        column(2,
                               pickerInput(
                                 inputId = "regionEventUi",
                                 label = 'Region of event',
                                 choices = sort(levels(as.factor(eventData$region_name))),
                                 options = list(
                                   `actions-box` = TRUE, 
                                   size = 12
                                 ),
                                 selected = NULL,
                                 multiple = TRUE
                               )
                        ),
                        # filter by district of event
                        column(2, 
                               uiOutput('pickerInputdistrictEventUi')
                        ),
                        # filter by event identification source
                        column(2,
                               pickerInput(
                                 inputId = "eventIdentificationSourceUi",
                                 label = 'Identification source',
                                 choices = sort(levels(as.factor(eventData$event_identification_source))),
                                 #choices = sort(levels(as.factor( c("forward_tracing", "backward_tracing", "unknown", "NA")  ))),
                                 options = list(
                                   `actions-box` = TRUE, 
                                   size = 12
                                 ),
                                 selected = NULL,
                                 multiple = TRUE
                               ) 
                        ),
                        # choosing indicator type
                        column(2, 
                               radioButtons("EventIndicatorTypeUi","Indicator type",  choices = c("Count","Proportion"),selected = c("Count"), inline = TRUE)
                        ) 		   
                      ) ,  
                      
              tabsetPanel( id= "tabEvent",
                tabPanel("Event dashboard", value = 0,
                                   wellPanel(style = "background: white", 
                                             fluidRow(
                                               column(2, infoBoxOutput("totalEvent", width = 12)),
                                               column(2, infoBoxOutput("totalEventManagementPending", width = 12)),
                                               column(2, infoBoxOutput("totalEventManagementOngoing", width = 12)),
                                               column(2, infoBoxOutput("totalEventManagementDone", width = 12)),
                                               column(2, infoBoxOutput("totalEventManagementClosed", width = 12)),
                                               column(2, infoBoxOutput("totalEventManagementMissing", width = 12))
                                             )
                                             ,
                                             fluidRow(
                                               column(2, infoBoxOutput("totalEventParticipants", width = 12)),
                                               column(2, infoBoxOutput("totalEventResultingCases", width = 12)),
                                               column(2, infoBoxOutput("totalEventstatusSignal", width = 12)),
                                               column(2, infoBoxOutput("totalEventstatusEvent" , width = 12)),
                                               column(2, infoBoxOutput("totalEventstatusCluster" , width = 12)),
                                               column(2, infoBoxOutput("totalEventstatusScreening" , width = 12))
                                             )
                                             
                                   ),
                                   wellPanel(
                                     h4(helpText("Barplot for events by region/district grouped by event status")) , 
                                     #plotOutput("eventBarplotUi", width = "100%", height = "auto")
                                     plotlyOutput("eventBarplotUi", width = "100%", height = "70vh")
                                     ,
                                     style = "background: white"
                                   ),
                                   fluidRow(
                                     column(4,
                                            h4(helpText("Table 1: Event status by type of place")), div(DT::dataTableOutput("eventCuntbytyplaceTable") , style = "font-size: 85%; width: 95%" )  
                                     )
                                     ,
                                     column(4,
                                            h4(helpText("Table 2: Event status by management status")) ,  div( DT::dataTableOutput("eventStatusByMangemantStatusTable")  , style = "font-size: 85%; width: 95%" )   
                                            
                                     )
                                     ,
                                     column(4,
                                            h4(helpText("Table 3: Event status by risk level")) ,  div( DT::dataTableOutput("eventStatusByRisklevelTable")  , style = "font-size: 85%; width: 95%" )  
                                     )
                                   )
                                   ,
                                   fluidRow(
                                     column(4,
                                            h4(helpText("Fig 2: Event status")), div(plotlyOutput("pieCdhartEventStatusUi", width = "95%", height = "50vh") , style = "font-size: 95%; width: 95%" )
                                     )
                                     ,
                                     column(4,
                                            h4(helpText("Fig 3: Event source type")) ,  div(plotlyOutput("pitChartEventSourceTypeUi", width = "95%", height = "50vh") , style = "font-size: 95%; width: 95%" )
                                     )
                                     ,
                                     column(4,
                                            h4(helpText("Fig 4: Event district")) ,  div(plotlyOutput("pitChartEventDidtrictUi", width = "95%", height = "50vh") , style = "font-size: 95%; width: 95%" )
                                     )
                                   )
                                   
              )
              ,
              tabPanel("Event by Jurisdiction",  value = 1,
                       fluidRow(
                         column(12, DT::dataTableOutput("eventCountbyJurisdictionTable") )    
                       )
                       )
              ,
              tabPanel("Custom indicators",  value = 2,
                       wellPanel(
                         h4(helpText("2 X 2 table. Click on 'Choose variables to plot 2X2 table' to generate the same table for other attributes.")) ,
                         DT::dataTableOutput("dynamic2x2TableEventUi")
                       ),
                       fluidRow( width = 10,                                                         
                                 column(6,                                                                
                                        wellPanel(
                                          h4(helpText("Dynamic pie chart: Click on 'Choose variable to plot Pie chart' to plot for another varaible.")) ,
                                          div(plotlyOutput("pieCdhartEventUi", width = "100%", height = "50vh" ), style = "font-size: 100%; width: 100%" ) 
                                        )
                                 ),
                                 column(6,                    
                                        wellPanel(
                                          h4(helpText("Dynamic bar graph: Click on 'Choose variable to plot bar graph' to plot for another varaible.")) ,
                                          div(plotlyOutput("barChartEventUi", width = "100%", height = "50vh" ), style = "font-size: 100%; width: 100%" ) 
                                        )              
                                 )
                       ) ## end of flud row
                       ),
              # tabPanel("Event time series" ), # to be added later
              tabPanel("Shapfile map", value = 3,
                       plotOutput("eventMapUi", width = "100%", height = "95vh")),
              tabPanel("Leaflet map",  #  value = 10, 
                       leafletOutput("map", width = "100%", height = 900),
                       #leafletOutput("eventLeafletMapUi", width = "100%", height = 900), 
                       absolutePanel(top = 10, right = 10,
                                     sliderInput("range", "Magnitudes", min(eventData$n_ep), max(eventData$n_ep),  # this can be used to represent number of ep per event node
                                                 value = range(eventData$n_ep), step = 1
                                     ),
                                     selectInput("colors", "Choose color Scheme to plot entities",
                                                 rownames(subset(brewer.pal.info, category %in% c("seq", "div")))
                                     ),
                                     checkboxInput("legend", "Show legend", TRUE)                       
                                     )
                    )
             # tabPanel("Event management" ) # to be added
            ) #,
          ) # clossing main panel                       
        )  # clossing sidbarlayout
),

### Backward tracing including cases, contacts and events
# tabPanel("Backward tracing" ),

##### contat data analysis -----
tabPanel("Contact data analysis", icon = icon("handshake"),
sidebarLayout( position = "left",
 sidebarPanel( width = 2,
   span(tags$i(h5("Please select filter options and click on `Apply changes` to run analyses.")), style="color:#045a8d"),
   
   actionButton(inputId = "contactDataAnalysisAction", label = "Apply changes", icon =  icon("running"),
                class = "btn-primary", width = '55%'),
   hr(),
   pickerInput("diseaseContactUi", "Disease", 
               choices = c("CORONAVIRUS", "LASSA","MONKEYPOX", "LASSA", "CSM","EVD","NEW_INFLUENZA", "PLAGUE",
                           "UNDEFINED","UNSPECIFIED_VHF","MEASLES","OTHER"), 
               selected = c("CORONAVIRUS"),
               multiple = FALSE),
   dateRangeInput("reportdateContactUi","Report date (dd-mm-yyyy)" , start = Sys.Date() - delay_default_UI, end = Sys.Date(), min = NULL,
                  max = NULL, format = "dd-mm-yyyy", startview = "month",
                  weekstart = 0, language = "en", separator = " to ", width = NULL,
                  autoclose = TRUE),
   
   # Filter specific event region and district
   pickerInput(
     inputId = "regionContactUi",
     label = 'Region of contact',
     choices = sort(levels(as.factor(contRegionDist$region_name))),
     options = list(
       `actions-box` = TRUE,
       size = 12
     ),
     selected = NULL,
     multiple = TRUE
   )
 ),
 mainPanel(width = 10,
   uiOutput("contact_analysis_output")
  )
)
),
# Sample data analysis ----
tabPanel("Sample data analysis",
icon = icon("vial"),
sidebarLayout(position = "left",
sidebarPanel(width = 2,
    span(tags$i(h5("Please select filter options and click on `Apply changes` to run analysis.")), style="color:#045a8d"),
    span(tags$i(h5("The date filter uses the report date of sample, not the report date of the essociated entity (case, contact, event participant, ...)")), style="color:#045a8d"),
    actionButton(inputId = "sampleDataAnalysisAction", label = "Apply changes", icon =  icon("running"),
                 class = "btn-primary", width = '55%'),
    hr(),
pickerInput(
  inputId = "samplepurposeUi",
  label = 'Choose sample pursope',
  choices = sort(levels(as.factor(sample_table$samplepurpose))),
  options = list(`actions-box` = TRUE, size = 12),
  selected = NULL,multiple = TRUE),
uiOutput("sample_cuctom_indicator_filter")
    ), 
mainPanel(width = 10,
# top filter that appears on the top of all tabs
fluidRow(
  # filter by disease ----
  column(2,
         pickerInput("diseaseSampleUi", "Disease", choices = sort(levels(as.factor(sample_table$disease_sample))),
                     selected = c("CORONAVIRUS"), multiple = FALSE)
         ),
  # filter by date of sample report ----
  column(2, 
         dateRangeInput("reportdateSampleUi","Report date (dd-mm-yyyy)" , start = Sys.Date() - delay_default_UI, end = Sys.Date(), min = NULL,
                        max = NULL, format = "dd-mm-yyyy", startview = "month",
                        weekstart = 0, language = "en", separator = " to ", width = NULL,
                        autoclose = TRUE)
  ),
  # filter by region of sample ----
  column(2,
         pickerInput(
           inputId = "regionSampleUi",
           label = 'Region of sample',
           choices = sort(levels(as.factor(sample_table$region_name))),
           options = list(
             `actions-box` = TRUE, 
             size = 12
           ),
           selected = NULL,
           multiple = TRUE
         )
  ),
  # filter by district of sample ----
  column(2, 
         uiOutput('pickerInputdistrictSampleUi')
  ),
  # filter by indicator type of sample ----
  column(2,
         radioButtons("sampleIndicatorTypeUi","Indicator type",  choices = c("Count","Proportion"),selected = c("Count"), inline = TRUE)
  )
),
# outputting the whole sample ui element built from the server side ------
uiOutput("sample_analysis_output")
) # clossing main panel                       
)  # clossing sidbarlayout 
),
  
# Model specification ----
tabPanel("Model specification",
         icon = icon("book"),
         # uiOutput("methodUI")
         radioButtons(inputId = "language", 
                      label = "",
                      choiceValues = c("en", "fr"),
                      choiceNames = c("English", "Français"),
                      selected = "en",
                      inline = TRUE),
uiOutput("model_specificationUI")
),

# About ------
tabPanel(title = "About", 

h4(strong("About SORMAS and SORMAS-Stats")),

h5("The the Surveillance, Outbreak Response Management and Analysis System (SORMAS) is an open-source mHealth (mobile health) system that organises and facilitates infectious
disease control and outbreak management procedures in addition to disease surveillance and epidemiologic analysis for all administrative
levels of a public health system (1, 2). SORMAS includes specific interfaces for 12 users (e.g., laboratorian,
contact tracing officer, epidemiologist), disease-specific process modules for 19 epidemic-prone diseases,
and a customizable process module for unforeseen emerging diseases and a COVID-19 module, which we
developed to support countries in the outbreak response. Users can operate SORMAS on web or mobile
app and bidirectionally synchronized with a central server via mobile telecommunication networks."),
         
h5("SORMAS-Stats contain functions to analyze and visualize surveillance data collected by the Surveillance Outbreak
  Response Management and Analysis System (SORMAS). SORMAS is an open source mobile eHealth System that processes
  disease control and outbreak management procedures in addition to surveillance and early detection of outbreaks through real-time digital
 surveillance including peripheral health care facilities and laboratories. "), 

h4(strong("SORMAS User and some of the diseases with modules for control measures")),

img(src = "process-flow-sormas.png", width = "800", height = "900"),  img(src = "sormas_diseases.png", width = "800", height = "900"),
fluidRow( 
dashboardPage( # the use of shiny dashboard is to make sure that all icons are fine, do not remove or deactivate this tab.
  dashboardHeader( ),
  dashboardSidebar(disable = TRUE),
  dashboardBody(
  h5(" Add more txt  and gifures here...")
)
)
)
),

# Footer ------
tags$footer(
hr(style = "border-color: #cbcbcb;"),
fluidRow(
  column(9,
         p('All of the data used to generate indicators and figures in this app were obtained from', tags$a(href = "https://demo.sormas.org/sormas-ui/", 'SORMAS', target = '_blank'), '.', style = "font-size: 85%"),
         p("App created by the ", tags$a(href = "https://github.com/hzi-braunschweig/SORMAS-Stats-next-gen", 'SORMAS-Stats Team', target = '_blank'), HTML("&bull;"), style = "font-size: 85%"),
         p("To use this app and other related SORMAS apps, find all the source codes on Github:", tags$a(href = "https://github.com/hzi-braunschweig", tags$i(class = 'fa fa-github', style = 'color:#5000a5'), target = '_blank'), style = "font-size: 85%"),
         p("Want to contribute? Have a question? Identify a bug or want to make a request? Open a discussion on ", tags$a(href = "https://github.com/hzi-braunschweig/SORMAS-Stats/discussions", tags$i(class = 'fa fa-github', style = 'color:#5000a5'), target = '_blank'), style = "font-size: 85%"),
         p(tags$em("Last updated: May 28, 2022"), style = 'font-size:75%'))
  ,
  column(3, align = "right",
         p('Powered by:', tags$a(href = " ", target = '_blank'), '', style = "font-size: 85%"),
         p(tags$a(href = "https://www.helmholtz-hzi.de/en/", 'HZI', target = '_blank'), '', style = "font-size: 85%"),
         p(tags$a(href = "https://www.bourgogne-franche-comte.ars.sante.fr/", 'ARS-BFC', target = '_blank'), '', style = "font-size: 85%"),
         p(tags$a(href = "https://www.vitagroup.ag/de_DE/Ueber-uns/symeda", 'vitagroup', target = '_blank'), '', style = "font-size: 85%"),
         p(tags$a(href = "https://www.giz.de/en/html/index.html", 'GIZ', target = '_blank'), '', style = "font-size: 85%")
  )
  )
)##
)
))

